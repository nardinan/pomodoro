; Pomodoro
; this script restores the environment after an action
(define say
	(lambda (c m)
		(begin
			(puppeteer_say c m (+ 1 (* (strlen m) 0.1)))
			(director_wait (+ 1 (* (strlen m) 0.1)))
		)
	)
)

(define animation
	(lambda (c m)
		(begin
			(puppeteer_set c m)
		)
	)
)

(define main_control
	(lambda (c)
		(begin
			(director_camera_follow c -100.0 1.0)
			(puppeteer_enable_control c)
		)
	)
)

(puppeteer_disable_control)

(puppeteer_show "yuriy" 1350)
(puppeteer_show "andrii" 2510)
(animation "andrii" "back_code")
(animation "yuriy" "back_code")

(effecteer_add "intro1" "CERN_intro_layer" 1700 1800 3 0 nil nil)
(director_camera_set 2000 2000)
(director_wait 3)

(director_camera_move 2000 500)
(director_wait 3)
(effecteer_delete "intro1")

(director_wait 1)
(say "andrii" "Dilution magnets are now operative and ready to prevent a catasrophic scenario")
(say "yuriy"  "That's great")
(director_wait 1)
(animation "yuriy" "still_right")
(say "yuriy" "Dr. Tykhonov, could you please disable the secutiry grids?")
(animation "andrii" "back")
(director_wait 1)
(animation "andrii" "still_left")
(say "andrii" "Dr. Tykhonov?")
(say "andrii" "Why Dr. Tykhonov?")
(say "yuriy"  "I'm bored")
(director_wait 2)
(animation "andrii" "back_code")
(director_wait 1)
(say "andrii" "Security grids have been disabled, Dr. Ilchenko")
(animation "yuriy" "back_code")
(say "yuriy" "Great")
(say "yuriy" "Dr. Ilchenko sounds good by the way")
(effecteer_add "smoke1" "smoke_spot_particle" 2050 400 3 0 nil nil)
(director_wait 1)
(animation "andrii" "back")
(animation "yuriy"  "back")
(director_wait 1)
(say "yuriy"  "Uhm")
(animation "yuriy" "still_right")
(say "yuriy"  "Andrii, the LHC is smoking. Are we overloading it?")
(director_wait 2)
(animation "andrii" "back_code")
(say "andrii" "Ehm ... probably we should shut if off right now before it gets worse")
(animation "yuriy" "back")
(say "yuriy"  "Uh?")
(say "yuriy"  "Worse?")
(say "yuriy"  "It's smoking! How could it be worse?") 
(effecteer_add "fire1" "fire_spot_particle" 2050 400 2 0 nil nil)
(effecteer_add "redalarm1" "red_alarm_animation" 0 0 3 0 t nil)
(animation "andrii" "back")
(director_wait 2)
(say "yuriy" "Oh, I see ...")
(director_wait 2)
(puppeteer_move "andrii" 1940)
(say "andrii" "Fuck")
(say "andrii" "Shit")
(animation "andrii" "back_code")
(say "andrii" "Crap")
(say "andrii" "We are polluting the space-time continuum!")
(animation "yuriy" "still_right")
(say "yuriy"  "What?")
(say "yuriy"  "Space-time continuum?")
(say "yuriy"  "Are you drunk?")
(say "andrii" "Shut the fuck up!")
(say "andrii" "Shut the fucking crap up!")
(effecteer_stop "fire1")
(director_wait 1)
(effecteer_delete "redalarm1")
(animation "yuriy"  "back")
(animation "andrii" "back")
(director_wait 1)
(say "yuriy"  "Looks better")
(effecteer_stop "smoke1")
(say "andrii" "Yes, looks a lot better")
